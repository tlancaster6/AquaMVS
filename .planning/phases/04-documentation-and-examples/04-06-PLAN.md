---
phase: 04-documentation-and-examples
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/package_example_dataset.py
  - example_data/README.md
  - docs/cli_guide.md
  - docs/tutorial/notebook.ipynb
  - README.md
autonomous: false
gap_closure: true

must_haves:
  truths:
    - "A packaging script exists that copies images, calibration, and config into a distributable archive"
    - "All placeholder URLs in docs are updated with the actual dataset download link"
    - "Users can download the example dataset and run the pipeline without preparing their own data"
  artifacts:
    - path: "scripts/package_example_dataset.py"
      provides: "Script to assemble example dataset from local data into a zip archive"
      min_lines: 40
    - path: "example_data/README.md"
      provides: "Updated download URL (no longer placeholder)"
      contains: "github.com/tlancaster6/AquaMVS/releases"
  key_links:
    - from: "example_data/README.md"
      to: "GitHub Releases"
      via: "download URL"
      pattern: "https://github.com/tlancaster6/AquaMVS/releases"
    - from: "docs/tutorial/notebook.ipynb"
      to: "GitHub Releases"
      via: "download URL"
      pattern: "github.com/tlancaster6/AquaMVS/releases"
---

<objective>
Close Gap 1 from verification: Package example dataset and update all placeholder URLs.

Purpose: Users currently cannot test AquaMVS without preparing their own data. The example dataset README exists but contains no actual data or working download link.
Output: Packaging script, uploaded dataset on GitHub Releases, all placeholder URLs replaced with real links.
</objective>

<execution_context>
@C:/Users/tucke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/tucke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-documentation-and-examples/04-05-SUMMARY.md
@example_data/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dataset packaging script and prepare archive</name>
  <files>scripts/package_example_dataset.py</files>
  <action>
Create `scripts/package_example_dataset.py` that:

1. Accepts command-line arguments:
   - `--image-dir`: Path to directory containing camera subdirectories (e.g., `../AquaCal/aquacal_data/some_session/images/`)
   - `--calibration`: Path to AquaCal calibration JSON file
   - `--frame`: Frame index to extract (default 0)
   - `--output`: Output zip path (default `aquamvs-example-dataset.zip`)

2. For each camera directory found in `--image-dir`:
   - Copies `frame_{frame:06d}.png` (or the single frame if only one exists)
   - Places into `images/{camera_id}/frame_000000.png` within the zip

3. Copies the calibration JSON as `calibration.json` in the zip root.

4. Generates a minimal `config.yaml` for the example dataset with:
   - `image_dir: ./images` (relative path)
   - `calibration: ./calibration.json` (relative path)
   - `output_dir: ./output`
   - `camera_pattern: "^([a-z0-9]+)"` (match camera directory names)
   - Sensible defaults for reconstruction (matcher_type: lightglue, pipeline_mode: sparse, device: cpu)

5. Includes the existing `example_data/README.md` as `README.md` in the zip.

6. Prints summary: number of cameras found, zip size, output path.

Use standard library only (zipfile, argparse, pathlib, yaml via a simple string template for config).
Do NOT import aquamvs or any heavy dependencies.

The script is a utility for the maintainer (user) to run locally. It is NOT shipped to end users.
  </action>
  <verify>
Run `python scripts/package_example_dataset.py --help` to confirm it accepts the expected arguments and prints usage.
  </verify>
  <done>Script exists, is runnable, and prints help text showing --image-dir, --calibration, --frame, --output arguments.</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: User packages and uploads example dataset</name>
  <action>
The user needs to:

1. **Run the packaging script** with their actual data:
   ```bash
   python scripts/package_example_dataset.py \
     --image-dir /path/to/aquacal/data/images \
     --calibration /path/to/calibration.json \
     --output aquamvs-example-dataset.zip
   ```
   (Adjust paths to point at their actual AquaCal recording data)

2. **Create a GitHub Release** and upload the zip:
   ```bash
   gh release create v0.1.0-example-data \
     --title "Example Dataset" \
     --notes "Example dataset for AquaMVS tutorials (13-camera ring rig, 1 frame)" \
     aquamvs-example-dataset.zip
   ```
   Or upload manually via GitHub web UI at https://github.com/tlancaster6/AquaMVS/releases/new

3. **Provide the download URL** back to Claude (format: `https://github.com/tlancaster6/AquaMVS/releases/download/TAG/aquamvs-example-dataset.zip`)
  </action>
  <resume-signal>Provide the GitHub Releases download URL for the example dataset zip, or say "skip" to leave placeholder URLs</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Update all placeholder URLs with actual download link</name>
  <files>
    example_data/README.md
    docs/cli_guide.md
    docs/tutorial/notebook.ipynb
    README.md
  </files>
  <action>
Using the download URL provided by the user in Task 2, update all placeholder references:

1. `example_data/README.md` line 16: Replace `**[Coming soon: Zenodo or GitHub Releases URL]**` with the actual download link in markdown format.

2. `docs/cli_guide.md` line 54: Replace `[TODO: Add Zenodo/GitHub Release URL]` with the actual download link.

3. `docs/tutorial/notebook.ipynb` cell containing line 22: Replace `[TODO: Add Zenodo/GitHub Release URL]` with the actual download link.

4. `README.md` line 70: Replace `Coming soon: Zenodo DOI` with the GitHub Releases link (DOI can come later separately).

If user said "skip" in Task 2, leave placeholders as-is and note in summary that URLs still need updating.
  </action>
  <verify>
Search all project files for "Coming soon" and "TODO.*URL" patterns. No matches should remain in user-facing documentation files (planning files are OK).
  </verify>
  <done>All four files updated with actual download URL. No placeholder URL patterns remain in user-facing docs.</done>
</task>

</tasks>

<verification>
- `scripts/package_example_dataset.py` exists and runs with `--help`
- Example dataset zip is uploaded to GitHub Releases (or user skipped)
- No placeholder URLs remain in: example_data/README.md, docs/cli_guide.md, docs/tutorial/notebook.ipynb, README.md
- Sphinx build still passes: `sphinx-build -W -b html docs/ docs/_build/html`
</verification>

<success_criteria>
- Packaging script automates dataset assembly from raw AquaCal data
- Example dataset is downloadable from GitHub Releases
- All documentation references point to real download URL
</success_criteria>

<output>
After completion, create `.planning/phases/04-documentation-and-examples/04-06-SUMMARY.md`
</output>
