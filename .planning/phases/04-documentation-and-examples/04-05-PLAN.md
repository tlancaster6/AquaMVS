---
phase: 04-documentation-and-examples
plan: 05
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified:
  - docs/_static/hero.png
  - README.md
  - example_data/README.md
autonomous: false

must_haves:
  truths:
    - "Example dataset is packaged and ready for distribution with calibration JSON"
    - "Hero image shows reconstruction result and is referenced in README"
    - "Sphinx build completes successfully with all content integrated"
  artifacts:
    - path: "example_data/README.md"
      provides: "Instructions for example dataset download and contents description"
    - path: "docs/_static/hero.png"
      provides: "Hero image showing reconstruction results"
  key_links:
    - from: "README.md"
      to: "docs/_static/hero.png"
      via: "hero image reference"
      pattern: "hero.png"
    - from: "example_data/README.md"
      to: "docs/tutorial/notebook.ipynb"
      via: "cross-reference between dataset and tutorial"
      pattern: "tutorial"
---

<objective>
Prepare the example dataset packaging, generate hero image, and verify complete documentation build.

Purpose: The example dataset enables users to test AquaMVS immediately without preparing their own data. The hero image makes the README compelling. Final build verification ensures all documentation integrates correctly.

Output: Example dataset README with download instructions, hero image, verified Sphinx build.
</objective>

<execution_context>
@C:/Users/tucke/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/tucke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-documentation-and-examples/04-01-SUMMARY.md
@.planning/phases/04-documentation-and-examples/04-02-SUMMARY.md
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create example dataset packaging and hero image placeholder</name>
  <files>example_data/README.md, docs/_static/hero.png, README.md</files>
  <action>
1. Create `example_data/` directory with a README.md describing:
   - What the example dataset contains (1 frame per camera from 13-camera rig, pre-made calibration JSON)
   - How to download it (placeholder URL — will be Zenodo or GitHub Releases)
   - Expected directory structure after download:
     ```
     example_data/
     ├── README.md
     ├── config.yaml
     ├── calibration.json
     └── images/
         ├── e3v82e0/
         │   └── frame_000000.png
         ├── e3v8213/
         │   └── frame_000000.png
         └── ... (13 cameras total)
     ```
   - Note that AquaCal was used for calibration, with link to AquaCal repo
   - License info for the example data

2. Create a simple hero image placeholder at `docs/_static/hero.png`:
   - Use Python/matplotlib to generate a static placeholder diagram showing the pipeline concept:
     cameras → depth maps → fused cloud → mesh
   - Create with this script (run it):
     ```python
     import matplotlib
     matplotlib.use("Agg")
     import matplotlib.pyplot as plt
     import matplotlib.patches as mpatches

     fig, ax = plt.subplots(1, 1, figsize=(12, 4), dpi=150)
     ax.set_xlim(0, 12)
     ax.set_ylim(0, 4)
     ax.axis("off")

     # Title
     ax.text(6, 3.5, "AquaMVS: Refractive Multi-View Stereo",
             ha="center", va="center", fontsize=16, fontweight="bold")

     # Pipeline boxes
     stages = [
         (1.5, 1.5, "Synchronized\nImages"),
         (4.5, 1.5, "Depth\nEstimation"),
         (7.5, 1.5, "Multi-View\nFusion"),
         (10.5, 1.5, "3D Surface\nMesh"),
     ]
     for x, y, label in stages:
         box = mpatches.FancyBboxPatch(
             (x - 1.1, y - 0.7), 2.2, 1.4,
             boxstyle="round,pad=0.1",
             facecolor="#e3f2fd", edgecolor="#1565c0", linewidth=2,
         )
         ax.add_patch(box)
         ax.text(x, y, label, ha="center", va="center", fontsize=10)

     # Arrows
     for i in range(3):
         x_start = stages[i][0] + 1.1
         x_end = stages[i + 1][0] - 1.1
         ax.annotate(
             "", xy=(x_end, 1.5), xytext=(x_start, 1.5),
             arrowprops=dict(arrowstyle="->", color="#1565c0", lw=2),
         )

     # Snell's law annotation
     ax.text(6, 0.3, "with Snell's law refraction at the air-water interface",
             ha="center", va="center", fontsize=9, fontstyle="italic", color="#666")

     fig.savefig("docs/_static/hero.png", bbox_inches="tight", facecolor="white")
     plt.close()
     print("Hero image saved to docs/_static/hero.png")
     ```
   - This is a conceptual diagram placeholder. Per user decision, the real hero image will be generated from example dataset results — but that requires running the pipeline with real data. This placeholder serves until then.

3. Update `README.md` hero image reference to point to the correct path. The image in README should use a GitHub-relative path that works on GitHub:
   ```markdown
   ![AquaMVS pipeline: from synchronized images through depth estimation and fusion to 3D surface mesh](docs/_static/hero.png)
   ```
   Verify this is already in README from Plan 02. If the path differs, update it.

4. Add `example_data/` to `.gitignore` (the actual data files, not the README):
   ```
   example_data/*
   !example_data/README.md
   ```
   This ensures the README is tracked but large image/data files are not.
  </action>
  <verify>Confirm `example_data/README.md` exists with download instructions and structure description. Confirm `docs/_static/hero.png` exists and is a valid PNG. Confirm README.md references the hero image.</verify>
  <done>Example dataset README describes contents and download process, hero image placeholder exists, README references it</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify complete documentation build</name>
  <files>docs/_build/html/index.html</files>
  <action>
Run the full Sphinx build and present results for human verification:
1. Run `sphinx-build -W -b html docs/ docs/_build/html` — must complete without errors
2. Present the built docs for user review

What was built across all Phase 4 plans:
- Furo theme with modern layout
- Installation guide (Windows, Linux, CPU, GPU)
- API reference (autodoc for Pipeline, config, calibration, reconstruction, CLI)
- Theory/concepts section with Mermaid diagrams (refractive geometry, dense stereo, fusion)
- Tutorial (Jupyter notebook + RST summary)
- CLI guide (markdown)
- Hero image in README
- ReadTheDocs configuration
- Example dataset README

User should verify:
1. Open `docs/_build/html/index.html` in browser — Furo theme renders, all sections in toctree
2. Check Installation page covers Windows, Linux, CPU, GPU
3. Check API/Pipeline page shows Pipeline class with docstring
4. Check Theory/Refractive Geometry page has math equations and Mermaid diagrams
5. Check CLI Guide shows all commands with examples
6. Check README: hero image renders, badges display, quickstart visible
7. Verify `.readthedocs.yaml` looks correct for future deployment

Type "approved" to complete Phase 4, or describe any issues to fix.
  </action>
  <verify>User types "approved" confirming documentation quality</verify>
  <done>All documentation sections render correctly, user has verified quality</done>
</task>

</tasks>

<verification>
1. `sphinx-build -W -b html docs/ docs/_build/html` completes successfully
2. All documentation sections render correctly with Furo theme
3. Hero image visible in README
4. Example dataset README provides clear download/usage instructions
5. .readthedocs.yaml ready for deployment
</verification>

<success_criteria>
- Complete documentation is buildable and navigable
- Example dataset packaging is ready (data files to be uploaded separately)
- Hero image placeholder is presentable
- User confirms documentation quality via checkpoint
</success_criteria>

<output>
After completion, create `.planning/phases/04-documentation-and-examples/04-05-SUMMARY.md`
</output>
